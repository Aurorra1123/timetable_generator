<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HKUST Course Timetable Generator</title>
    <style>
        /* --- åŸºæœ¬æ ·å¼ --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            background-color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        /* --- è¾“å…¥åŒºåŸŸ --- */
        .input-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        #course-input {
            width: 100%;
            height: 200px;
            border: 2px solid #dde2e7;
            border-radius: 8px;
            padding: 12px;
            font-size: 14px;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            resize: vertical;
            transition: border-color 0.3s;
        }

        #course-input:focus {
            border-color: #4a90e2;
            outline: none;
        }

        #generate-btn {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            align-self: center;
        }

        #generate-btn:hover {
            background-color: #357abd;
        }

        /* --- è¯¾è¡¨ç½‘æ ¼ --- */
        #timetable-container {
            display: grid;
            grid-template-columns: 60px repeat(5, 1fr); /* æ—¶é—´åˆ— + 5å¤© */
            grid-template-rows: 50px; /* æ˜ŸæœŸæ ‡é¢˜è¡Œ */
            background-color: white;
            border: 1px solid #e0e0e0;
        }

        .grid-header {
            font-weight: bold;
            text-align: center;
            padding: 15px 5px;
            border-bottom: 2px solid #e0e0e0;
            border-left: 1px solid #e0e0e0;
            background-color: #f9fafb;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .time-label-col {
            position: relative;
        }

        .time-label {
            position: absolute;
            right: 8px;
            transform: translateY(-50%);
            font-size: 12px;
            color: #888;
        }

        .day-column {
            position: relative;
            border-left: 1px solid #e0e0e0;
            /* ç”¨äºç”»æ¨ªçº¿ */
            background-image: linear-gradient(to bottom, #f0f0f0 1px, transparent 1px);
            background-size: 100% 60px; /* æ¯å°æ—¶ä¸€æ¡çº¿ */
        }
        
        .grid-header:first-child, .day-column:first-child {
            border-left: none;
        }

        /* --- è¯¾ç¨‹å—æ ·å¼ --- */
        .event-item {
            position: absolute;
            left: 4px;
            right: 4px;
            border-radius: 6px;
            padding: 8px;
            box-sizing: border-box;
            overflow: hidden;
            font-size: 13px;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .event-item:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 20;
        }

        .event-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .event-details {
            font-size: 12px;
            line-height: 1.4;
        }

        /* --- å†²çªè¯¾ç¨‹æ ·å¼ --- */
        .conflict-item {
            border: 2px solid rgba(255, 255, 255, 0.8) !important;
        }

        .conflict-item .event-title {
            font-size: 12px; /* å†²çªæ—¶æ ‡é¢˜ç¨å° */
        }

        .conflict-item .event-details {
            font-size: 10px; /* å†²çªæ—¶è¯¦æƒ…æ›´å° */
            line-height: 1.2;
        }

        /* --- Tutorialæ ·å¼ --- */
        .tutorial-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .tutorial-steps .step {
            margin-bottom: 25px;
            padding: 20px;
            border-left: 4px solid #4a90e2;
            background-color: #f8f9fa;
            border-radius: 0 8px 8px 0;
        }

        .tutorial-steps .step h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .tutorial-steps .step p {
            margin: 8px 0;
            line-height: 1.6;
        }

        .tutorial-tips, .tutorial-notice {
            max-width: 100%;
        }

        .tutorial-tips h4, .tutorial-notice h4 {
            margin-top: 0;
        }

        .tutorial-tips ul, .tutorial-notice ul {
            line-height: 1.6;
        }

        /* --- Tutorialåˆ‡æ¢åŠŸèƒ½æ ·å¼ --- */
        .tutorial-content {
            transition: all 0.5s ease-in-out;
            overflow: hidden;
            margin-bottom: 0;
        }

        .tutorial-content.hidden {
            max-height: 0;
            opacity: 0;
            margin-top: 0;
            margin-bottom: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        .tutorial-content.visible {
            max-height: 3000px;
            opacity: 1;
            margin-bottom: 30px;
        }

        /* ç¡®ä¿tutorial sectionæœ‰è¶³å¤Ÿçš„ç©ºé—´ */
        .tutorial-section {
            margin-bottom: 20px;
            transition: margin-bottom 0.5s ease-in-out;
        }

        .tutorial-section.expanded {
            margin-bottom: 40px;
        }

        #tutorial-toggle:hover {
            background-color: #357abd;
            transform: translateY(-1px);
        }

        #tutorial-toggle:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>HKUST Course Timetable Generator</h1>
        <p style="text-align: center; color: #666; margin-bottom: 20px; font-size: 16px;">Check the HKUST/HKUST(GZ) timetable during the add/drop period</p>
        
        <!-- Tutorial Section -->
        <div class="tutorial-section" style="margin-bottom: 30px;">
            <div style="text-align: center; margin-bottom: 20px;">
                <h2 style="color: #2c3e50; margin-bottom: 15px; display: inline-block;">ğŸ“š How to Use Tutorial</h2>
                <button id="tutorial-toggle" style="margin-left: 15px; padding: 8px 16px; background-color: #28a745; color: white; border: none; border-radius: 20px; cursor: pointer; font-size: 14px; transition: all 0.3s;">
                    Show Tutorial
                </button>
            </div>
            
            <div id="tutorial-content" class="tutorial-content">
            <div class="tutorial-steps">
                <div class="step">
                    <h3 style="color: #4a90e2;">Step 1: Go to Add Classes Page</h3>
                    <p>Login to SIS and go to <strong>[Student Center -> Enroll -> Add]</strong></p>
                    <p>You may need to select the correct term and click "Continue".</p>
                    <div style="text-align: center; margin: 15px 0;">
                        <img src="img/step1.jpg" alt="Step 1 Screenshot" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    </div>
                </div>
                
                <div class="step">
                    <h3 style="color: #4a90e2;">Step 2: Select Courses and Copy</h3>
                    <p>Dragging the pointer or finger to select courses.</p>
                    <p><strong>(You do NOT need to carefully select each course)</strong></p>
                    <p>The converter will recognize which courses are included.</p>
                    <div style="text-align: center; margin: 15px 0;">
                        <img src="img/step2.jpg" alt="Step 2 Screenshot" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    </div>
                </div>
                
                <div class="step">
                    <h3 style="color: #4a90e2;">Step 3: Paste and Generate</h3>
                    <p>Copy the selected courses and paste them to the text area below.</p>
                    <p>Click the <strong>"Generate Timetable"</strong> button.</p>
                    <p>The generator will extract and display your course schedule.</p>
                </div>

                <div class="step">
                    <h3 style="color: #4a90e2;">Step 4: Add PE and Politics Courses</h3>
                    <p>Click the <strong>"Add PE and Politics Courses"</strong> button.</p>
                    <p>Select the courses you want to add.</p>
                    <p>Click the <strong>"Add Selected Courses"</strong> button.</p>
                    <div style="text-align: center; margin: 15px 0;">
                        <img src="img/step3.jpg" alt="Step 3 Screenshot" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    </div>
                </div>
                
                <div class="step">
                    <h3 style="color: #4a90e2;">Step 5: View Your Timetable</h3>
                    <p>Your courses will be displayed in a visual timetable format.</p>
                    <p>Time conflicts will be shown side by side for easy comparison.</p>
                </div>
            </div>
            
            <div class="tutorial-tips" style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                <h4 style="color: #2c3e50; margin-bottom: 10px;">ğŸ’¡ Tips:</h4>
                <ul style="margin: 0; padding-left: 20px;">
                    <li>You can press <strong>Ctrl + A</strong> to select all page content - extra information won't affect the result.</li>
                    <li>The generator supports courses from UCUG, UFUG, AIAA, SMMG, DSAA and other HKUST departments.</li>
                    <li>Time conflicts are automatically detected and displayed side by side.</li>
                </ul>
            </div>
            
            <div class="tutorial-notice" style="background-color: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #ffc107;">
                <h4 style="color: #856404; margin-bottom: 10px;">âš ï¸ Notice:</h4>
                <ul style="margin: 0; padding-left: 20px; color: #856404;">
                    <li>The generator may not work properly if course information is not copied correctly.</li>
                    <li>Make sure to copy from the official HKUST SIS system.</li>
                    <li>If you find any bugs, please report them with screenshots and course information.</li>
                </ul>
            </div>
            </div>
        </div>
        
        <div class="input-area">
            <textarea id="course-input" placeholder="Paste your course information here..."></textarea>
            <button id="generate-btn">Generate Timetable</button>
        </div>
        <div id="timetable-container">
            </div>
            
        <!-- Course Selection Module -->
        <div id="course-selector" style="display: none; margin-top: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
            <h3 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">ğŸ“š Add PE and Politics Courses</h3>
            
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <!-- Politics Courses Selection -->
                <div style="flex: 1; min-width: 300px;">
                    <h4 style="color: #4a90e2; margin-bottom: 15px;">ğŸ“ Politics Courses</h4>
                    <div id="politics-courses" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 6px; padding: 10px; background-color: white;">
                        <!-- Politics course options will be loaded dynamically via JS -->
                    </div>
                </div>
                
                <!-- PE Courses Selection -->
                <div style="flex: 1; min-width: 300px;">
                    <h4 style="color: #4a90e2; margin-bottom: 15px;">ğŸƒ PE Courses</h4>
                    <div id="pe-courses" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 6px; padding: 10px; background-color: white;">
                        <!-- PE course options will be loaded dynamically via JS -->
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="add-selected-courses" style="background-color: #28a745; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px; margin-right: 10px;">
                    Add Selected Courses
                </button>
                <button id="clear-added-courses" style="background-color: #dc3545; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 16px;">
                    Clear Added Courses
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="margin-top: 40px; padding: 20px 0; border-top: 1px solid #e0e0e0; background-color: #f8f9fa;">
        <div style="max-width: 1400px; margin: 0 auto; text-align: center; color: #666; font-size: 14px;">
            <div style="margin-bottom: 10px;">
                <span style="margin: 0 15px;">ğŸ“§ Contact: <a href="mailto:aurorra1123@gmail.com" style="color: #4a90e2; text-decoration: none;">aurorra1123@gmail.com</a></span>
                <span style="margin: 0 15px;">â­ <a href="https://github.com/Aurorra1123/timetable_generator" target="_blank" style="color: #4a90e2; text-decoration: none;">GitHub</a></span>
                <span style="margin: 0 15px;">ğŸ’ <a href="#" onclick="showSponsorModal(); return false;" style="color: #4a90e2; text-decoration: none;">Buy me a coffee</a></span>
            </div>
            <div style="font-size: 12px; color: #999;">
                Made for â¤ï¸HKUST&HKUST(GZ) student
            </div>
        </div>
    </footer>

    <!-- Sponsor Modal -->
    <div id="sponsor-modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8);" onclick="hideSponsorModal()">
        <div style="position: relative; margin: 5% auto; max-width: 90%; max-height: 90%; text-align: center;">
            <span onclick="hideSponsorModal()" style="position: absolute; top: -40px; right: 0; color: white; font-size: 35px; font-weight: bold; cursor: pointer; z-index: 1001;">&times;</span>
            <img src="img/sponsor.jpg" alt="Sponsor QR Code" style="max-width: 100%; max-height: 80vh; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
            <div style="color: white; margin-top: 15px; font-size: 16px;">
                Thank you for your support! ğŸ™
            </div>
            </div>
    </div>

    <script>
        // Tutorialåˆ‡æ¢åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const tutorialToggle = document.getElementById('tutorial-toggle');
            const tutorialContent = document.getElementById('tutorial-content');
            const tutorialSection = document.querySelector('.tutorial-section');
            let isHidden = true;

            // åˆå§‹çŠ¶æ€è®¾ä¸ºéšè—
            tutorialContent.classList.add('hidden');

            tutorialToggle.addEventListener('click', function() {
                if (isHidden) {
                    // æ˜¾ç¤ºtutorial
                    tutorialContent.classList.remove('hidden');
                    tutorialContent.classList.add('visible');
                    tutorialSection.classList.add('expanded');
                    tutorialToggle.textContent = 'Hide Tutorial';
                    tutorialToggle.style.backgroundColor = '#4a90e2';
                } else {
                    // éšè—tutorial
                    tutorialContent.classList.remove('visible');
                    tutorialContent.classList.add('hidden');
                    tutorialSection.classList.remove('expanded');
                    tutorialToggle.textContent = 'Show Tutorial';
                    tutorialToggle.style.backgroundColor = '#28a745';
                }
                isHidden = !isHidden;
            });
        });

        // Sponsoræ¨¡æ€æ¡†åŠŸèƒ½
        function showSponsorModal() {
            document.getElementById('sponsor-modal').style.display = 'block';
            document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
        }

        function hideSponsorModal() {
            document.getElementById('sponsor-modal').style.display = 'none';
            document.body.style.overflow = 'auto'; // æ¢å¤æ»šåŠ¨
        }

        // ESCé”®å…³é—­æ¨¡æ€æ¡†
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                hideSponsorModal();
            }
        });

        // å…¨å±€å˜é‡
        let mainCourses = [];
        let additionalCourses = [];
        let selectedAdditionalCourses = [];

        document.getElementById('generate-btn').addEventListener('click', function() {
            const rawText = document.getElementById('course-input').value;
            mainCourses = parseCourseText(rawText);
            renderTimetable([...mainCourses, ...selectedAdditionalCourses]);
            
            // æ˜¾ç¤ºè¯¾ç¨‹é€‰æ‹©æ¨¡å—
            document.getElementById('course-selector').style.display = 'block';
            loadAdditionalCourses();
        });

        // è§£æç²˜è´´çš„æ–‡æœ¬
        function parseCourseText(text) {
            // é¢„å¤„ç†ï¼šåˆ é™¤åŒ…å«æ— å…³å†…å®¹çš„è¡Œ
            const cleanedText = text.split('\n')
                .filter(line => {
                    const trimmedLine = line.trim();
                    // è¿‡æ»¤æ‰å¸¸è§çš„é¡µé¢å…ƒç´ å’Œæ— å…³å†…å®¹
                    const unwantedPatterns = [
                        'Open', 'Delete', 'Closed', 'Wait List', 'Add to Cart',
                        'Enter Class Nbr', 'Find Classes', 'Class Search', 'My Requirements',
                        'Shopping Cart', 'Days/Times', 'Room', 'Instructor', 'Units', 'Status',
                        'Change Term', 'Step 1', 'Step 2', 'Step 3', 'Proceed to Step',
                        'My Class Schedule', 'Request for Approval', 'Click here for approval',
                        'GO!', 'go to', 'Search', 'Plan', 'Enroll', 'My Academics',
                        'add', 'drop', 'swap', 'term information', 'You are not registered',
                        'Select classes', 'Change', 'Enter', 'Collapsible section'
                    ];
                    
                    // å¦‚æœè¡ŒåŒ…å«ä»»ä½•ä¸éœ€è¦çš„æ¨¡å¼ï¼Œå°±è¿‡æ»¤æ‰
                    return !unwantedPatterns.some(pattern => 
                        trimmedLine.toLowerCase().includes(pattern.toLowerCase())
                    );
                })
                .join('\n');
            
            // ä½¿ç”¨è¯¾ç¨‹ä»£ç ä½œä¸ºåˆ†å‰²æ ‡å¿—ï¼Œè€Œä¸æ˜¯ä¾èµ–ç©ºè¡Œ
            const allCourses = [];
            const dayMap = { 'Mo': 'Mon', 'Tu': 'Tue', 'We': 'Wed', 'Th': 'Thu', 'Fr': 'Fri' };
            const validPrefixes = ['UCUG', 'UFUG', 'AIAA', 'SMMG', 'DSAA','AMAT','BSBE','CMAA','CNCG','FDLE','DDSAA','EOAS','FTEC','FUNH','INFH','INTR','IOTA','IPEN','LANG','MIC','MSS','MP','DEVP','LED','ROAS','SEEN','SOCH','SYSH','UCMP','UGOD','DLED','AIAA','AMAT','BSBE','CMAA','CNCG','FDLE','DDSAA','EOAS','FTEC','FUNH','INFH','INTR','IOTA','IPEN','LANG','MIC','MSS','MP','DEVP','LED','ROAS','SEEN','SOCH','SYSH','UCMP','UGOD','MOES'];
            
            // å°†æ–‡æœ¬æŒ‰è¡Œåˆ†å‰²
            const allLines = cleanedText.split('\n').map(l => l.trim()).filter(l => l);
            
            // æ‰¾åˆ°æ‰€æœ‰è¯¾ç¨‹ä»£ç è¡Œçš„ç´¢å¼•
            const courseStartIndices = [];
            for (let i = 0; i < allLines.length; i++) {
                const line = allLines[i];
                if (validPrefixes.some(prefix => line.startsWith(prefix))) {
                    courseStartIndices.push(i);
                    console.log('æ‰¾åˆ°è¯¾ç¨‹ä»£ç è¡Œ:', line, 'åœ¨ç´¢å¼•:', i);
                }
            }
            console.log('æ€»å…±æ‰¾åˆ°è¯¾ç¨‹æ•°é‡:', courseStartIndices.length);
            
            // æŒ‰è¯¾ç¨‹ä»£ç åˆ†å‰²æˆè¯¾ç¨‹å—
            for (let i = 0; i < courseStartIndices.length; i++) {
                const startIndex = courseStartIndices[i];
                const endIndex = i < courseStartIndices.length - 1 ? courseStartIndices[i + 1] : allLines.length;
                
                // æå–å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰è¡Œ
                const courseLines = allLines.slice(startIndex, endIndex);
                if (courseLines.length < 4) continue; // è‡³å°‘éœ€è¦4è¡Œï¼šè¯¾ç¨‹åã€ç¼–å·ã€æ—¶é—´ã€åœ°ç‚¹

                // éªŒè¯è¯¾ç¨‹å—çš„æœ‰æ•ˆæ€§ï¼šå¿…é¡»åŒ…å«è¯¾ç¨‹ç¼–å·å’Œæ—¶é—´ä¿¡æ¯
                const hasValidStructure = courseLines.some(line => /^\(\d+\)$/.test(line.trim())) && 
                                        courseLines.some(line => /^(Mo|Tu|We|Th|Fr)+ \d{2}:\d{2} - \d{2}:\d{2}/.test(line.trim()));
                
                if (!hasValidStructure) continue; // è·³è¿‡æ— æ•ˆçš„è¯¾ç¨‹å—
                
                console.log('è§£æè¯¾ç¨‹å—:', courseLines[0]);
                console.log('è¯¾ç¨‹å—å†…å®¹:', courseLines);

                const baseCourse = {};
                baseCourse.code = courseLines[0]; // ç¬¬ä¸€è¡Œå°±æ˜¯è¯¾ç¨‹ä»£ç 
                
                // æŸ¥æ‰¾æ‰€æœ‰æ—¶é—´è¡Œï¼ˆå¯èƒ½æœ‰å¤šä¸ªæ—¶é—´æ®µï¼‰
                const timeLines = [];
                for (let j = 0; j < courseLines.length; j++) {
                    if (/^(Mo|Tu|We|Th|Fr)+ \d{2}:\d{2} - \d{2}:\d{2}/.test(courseLines[j])) {
                        timeLines.push({
                            index: j,
                            line: courseLines[j]
                        });
                    }
                }
                
                if (timeLines.length === 0) continue; // æ²¡æ‰¾åˆ°æ—¶é—´è¡Œï¼Œè·³è¿‡è¿™ä¸ªè¯¾ç¨‹

                // æ‰¾åˆ°åœ°ç‚¹ä¿¡æ¯ï¼ˆé€šå¸¸åœ¨æœ€åä¸€ä¸ªæ—¶é—´è¡Œä¹‹åçš„ç¬¬ä¸€è¡Œï¼‰
                let location = 'æœªçŸ¥åœ°ç‚¹';
                let instructor = 'æœªçŸ¥æ•™å¸ˆ';
                const lastTimeIndex = timeLines[timeLines.length - 1].index;
                
                // åœ°ç‚¹ä¿¡æ¯åº”è¯¥åœ¨æœ€åä¸€ä¸ªæ—¶é—´è¡Œçš„ä¸‹ä¸€è¡Œ
                if (lastTimeIndex + 1 < courseLines.length) {
                    const locationLine = courseLines[lastTimeIndex + 1].trim();
                    // è¿‡æ»¤æ‰è¯¾ç¨‹ç¼–å·å’Œå­¦åˆ†ä¿¡æ¯
                    if (locationLine && !/^\(\d+\)$/.test(locationLine) && !/^\d+\.\d{2}$/.test(locationLine)) {
                        location = locationLine;
                        console.log('æ‰¾åˆ°åœ°ç‚¹:', location);
                        
                        // æ•™å¸ˆä¿¡æ¯åœ¨åœ°ç‚¹ä¹‹åçš„ä¸‹ä¸€è¡Œ
                        if (lastTimeIndex + 2 < courseLines.length) {
                            const instructorLine = courseLines[lastTimeIndex + 2].trim();
                            // è¿‡æ»¤æ‰è¯¾ç¨‹ç¼–å·å’Œå­¦åˆ†ä¿¡æ¯
                            if (instructorLine && !/^\(\d+\)$/.test(instructorLine) && !/^\d+\.\d{2}$/.test(instructorLine)) {
                                instructor = instructorLine;
                                console.log('æ‰¾åˆ°æ•™å¸ˆ:', instructor);
                            }
                        }
                    }
                }

                // å¤„ç†æ¯ä¸ªæ—¶é—´æ®µ
                timeLines.forEach(timeLine => {
                    const timeMatch = timeLine.line.match(/^([MoTuWeThFr]+) (\d{2}:\d{2}) - (\d{2}:\d{2})/);
                    if (!timeMatch) return;
                    
                    const [, daysStr, startTime, endTime] = timeMatch;
                    
                    // å¤„ç†å¤šå¤©è¯¾ç¨‹ (å¦‚ MoWe, TuTh) æˆ–å•å¤©è¯¾ç¨‹ (å¦‚ Mo, Fr)
                const days = daysStr.match(/(Mo|Tu|We|Th|Fr)/g);
                if (days) {
                    days.forEach(day => {
                        allCourses.push({
                                ...baseCourse,
                                startTime: startTime,
                                endTime: endTime,
                                location: location,
                                instructor: instructor,
                            day: dayMap[day]
                        });
                    });
                }
            });
            }
            return allCourses;
        }
        
        // æ£€æµ‹æ—¶é—´å†²çª
        function detectTimeConflicts(courses) {
            const conflictGroups = [];
            const processed = new Set();
            
            for (let i = 0; i < courses.length; i++) {
                if (processed.has(i)) continue;
                
                const currentCourse = courses[i];
                const conflictGroup = [currentCourse];
                processed.add(i);
                
                // æ£€æŸ¥ä¸å…¶ä»–è¯¾ç¨‹çš„æ—¶é—´å†²çª
                for (let j = i + 1; j < courses.length; j++) {
                    if (processed.has(j)) continue;
                    
                    const otherCourse = courses[j];
                    if (hasTimeOverlap(currentCourse, otherCourse)) {
                        conflictGroup.push(otherCourse);
                        processed.add(j);
                    }
                }
                
                conflictGroups.push(conflictGroup);
            }
            
            return conflictGroups;
        }
        
        // æ£€æŸ¥ä¸¤ä¸ªè¯¾ç¨‹æ˜¯å¦æœ‰æ—¶é—´é‡å 
        function hasTimeOverlap(course1, course2) {
            const [start1H, start1M] = course1.startTime.split(':').map(Number);
            const [end1H, end1M] = course1.endTime.split(':').map(Number);
            const [start2H, start2M] = course2.startTime.split(':').map(Number);
            const [end2H, end2M] = course2.endTime.split(':').map(Number);
            
            const start1Minutes = start1H * 60 + start1M;
            const end1Minutes = end1H * 60 + end1M;
            const start2Minutes = start2H * 60 + start2M;
            const end2Minutes = end2H * 60 + end2M;
            
            // æ£€æŸ¥æ—¶é—´æ®µæ˜¯å¦æœ‰é‡å 
            return !(end1Minutes <= start2Minutes || end2Minutes <= start1Minutes);
        }
        
        // æ¸²æŸ“è¯¾è¡¨
        function renderTimetable(courses) {
            const container = document.getElementById('timetable-container');
            container.innerHTML = ''; // æ¸…ç©ºæ—§è¯¾è¡¨

            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            const startHour = 8;
            const endHour = 22;
            const totalHours = endHour - startHour;
            const hourHeight = 60; // æ¯å°æ—¶60åƒç´ 

            // --- 1. åˆ›å»ºç½‘æ ¼æ¡†æ¶ ---
            // æ˜ŸæœŸæ ‡é¢˜è¡Œ
            container.innerHTML += `<div class="grid-header"></div>`; // å·¦ä¸Šè§’ç©ºç™½æ ¼
            days.forEach(day => {
                let dayName = {Mon: 'Mon', Tue: 'Tue', Wed: 'Wed', Thu: 'Thu', Fri: 'Fri'}[day];
                container.innerHTML += `<div class="grid-header">${dayName}</div>`;
            });

            // æ—¶é—´åˆ—å’Œæ¯æ—¥åˆ—
            const timeCol = document.createElement('div');
            timeCol.className = 'time-label-col';
            
            const dayCols = days.map(day => {
                const col = document.createElement('div');
                col.className = 'day-column';
                col.style.height = `${totalHours * hourHeight}px`;
                return col;
            });

            // æ·»åŠ æ—¶é—´åˆ»åº¦
            for (let i = 0; i <= totalHours; i++) {
                const hour = startHour + i;
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.innerText = `${hour.toString().padStart(2, '0')}:00`;
                timeLabel.style.top = `${i * hourHeight}px`;
                timeCol.appendChild(timeLabel);
            }
            
            container.appendChild(timeCol);
            dayCols.forEach(col => container.appendChild(col));

            // --- 2. æ£€æµ‹æ—¶é—´å†²çªå¹¶æ”¾ç½®è¯¾ç¨‹å— ---
            const courseColors = {};
            const colors = ['#e57373', '#81c784', '#64b5f6', '#ffb74d', '#ba68c8', '#4dd0e1', '#f06292', '#7986cb'];
            let colorIndex = 0;

            // æŒ‰å¤©åˆ†ç»„è¯¾ç¨‹
            const coursesByDay = {};
            days.forEach(day => coursesByDay[day] = []);

            courses.forEach(course => {
                if (days.includes(course.day)) {
                    coursesByDay[course.day].push(course);
                }
            });

            // ä¸ºæ¯å¤©æ£€æµ‹å†²çªå¹¶æ¸²æŸ“è¯¾ç¨‹
            days.forEach((day, dayIndex) => {
                const dayCourses = coursesByDay[day];
                if (dayCourses.length === 0) return;

                // æ£€æµ‹æ—¶é—´å†²çª
                const conflictGroups = detectTimeConflicts(dayCourses);
                
                conflictGroups.forEach(group => {
                    const conflictCount = group.length;
                    
                    group.forEach((course, conflictIndex) => {
                // åˆ†é…é¢œè‰²
                const baseCode = course.code.split('-')[0];
                        let color;
                        
                        if (course.isAdditional) {
                            // é¢å¤–æ·»åŠ çš„è¯¾ç¨‹ä½¿ç”¨ç‰¹æ®Šé¢œè‰²
                            if (course.code.includes('1103')) {
                                color = '#ff9800'; // ä½“è‚²è¯¾ç”¨æ©™è‰²
                            } else {
                                color = '#9c27b0'; // æ€æ”¿è¯¾ç”¨ç´«è‰²
                            }
                        } else {
                            // åŸæœ‰è¯¾ç¨‹ä½¿ç”¨åŸæ¥çš„é¢œè‰²åˆ†é…é€»è¾‘
                if (!courseColors[baseCode]) {
                    courseColors[baseCode] = colors[colorIndex % colors.length];
                    colorIndex++;
                }
                            color = courseColors[baseCode];
                        }

                // è®¡ç®—ä½ç½®
                const [startH, startM] = course.startTime.split(':').map(Number);
                const [endH, endM] = course.endTime.split(':').map(Number);

                const top = ((startH - startHour) + startM / 60) * hourHeight;
                const height = ((endH + endM / 60) - (startH + startM / 60)) * hourHeight;
                
                // åˆ›å»ºè¯¾ç¨‹å—å…ƒç´ 
                const eventEl = document.createElement('div');
                eventEl.className = 'event-item';
                eventEl.style.top = `${top}px`;
                        eventEl.style.height = `${height - 2}px`;
                eventEl.style.backgroundColor = color;
                        
                        // å¤„ç†å†²çªå¸ƒå±€ï¼šå¹¶æ’æ˜¾ç¤º
                        if (conflictCount > 1) {
                            const width = Math.floor(100 / conflictCount);
                            const leftOffset = width * conflictIndex;
                            eventEl.style.width = `${width - 1}%`; // å‡1%ç•™é—´è·
                            eventEl.style.left = `${leftOffset}%`;
                            eventEl.style.right = 'auto';
                            eventEl.classList.add('conflict-item');
                        }

                eventEl.innerHTML = `
                    <div class="event-title">${course.code}</div>
                    <div class="event-details">
                        ${course.instructor}<br>
                        ${course.location}
                    </div>
                `;
                
                    dayCols[dayIndex].appendChild(eventEl);
                    });
                });
            });
        }
        
        // åŠ è½½é¢å¤–è¯¾ç¨‹æ•°æ®
        function loadAdditionalCourses() {
            console.log('å¼€å§‹åŠ è½½é¢å¤–è¯¾ç¨‹æ•°æ®...');
            
            // ç›´æ¥ä½¿ç”¨åµŒå…¥çš„å®Œæ•´è¯¾ç¨‹æ•°æ®ï¼Œé¿å…CORSé—®é¢˜
            const klmsCourses = `MOES1001-L1
(6465)
Fr 18:00 - 20:50
Rm LHB, C4
TBA
3.00

MOES1003-L1
(6466)
Mo 18:00 - 20:50
Rm LHA, C5
Zhongjing WANG
3.00

MOES1003-L2
(6485)
We 18:00 - 20:50
Rm LHB, C4
Zhongjing WANG
3.00

MOES1003-L3
(6486)
Fr 15:00 - 17:50
Rm 101, W1
Tieying XU
3.00

MOES1003-L4
(6487)
Tu 18:00 - 20:50
Rm LHC-L1, C3
TBA
3.00

MOES1006-L1
(6502)
Th 18:00 - 20:50
Rm LHB, C4
He ZHENG
3.00

MOES1006-L2
(6503)
We 12:00 - 14:50
Rm 102, E4
He ZHENG
3.00

MOES1006-L3
(6504)
Fr 09:00 - 11:50
Rm LHA, C5
Tieying XU
3.00

MOES1103-Aerobic Dance I
(6638)
We 15:00 - 16:20
Badminton Court 8
Jiajia Hu
3.00

MOES1103-Aerobic Dance II
(6639)
We 16:30 - 17:50
Badminton Court 8
Jiajia Hu
3.00

MOES1103-Badminton I
(6591)
Tu 16:30 - 17:50
Badminton Court
Weidong LI
3.00

MOES1103-Badminton II
(6600)
Tu 18:00 - 19:20
Badminton Court
Weidong LI
3.00

MOES1103-Badminton III
(6601)
We 09:00 - 10:20
Badminton Court
Noah Bo FANG
3.00

MOES1103-Badminton IV
(6602)
We 10:30 - 11:50
Badminton Court
Noah Bo FANG
3.00

MOES1103-Basketball I
(6568)
Mo 15:00 - 16:30
Basketball Court
Chunhui WANG
3.00

MOES1103-Basketball II
(6569)
Mo 16:30 - 17:50
Basketball Court
Chunhui WANG
3.00

MOES1103-Basketball III
(6584)
Mo 18:00 - 19:20
Basketball Court
Chunhui WANG
3.00

MOES1103-Brazilian Jiujitsu Advanced
(6672)
Tu 09:00 - 10:20
Multifunctional Gym Mat
Dongye LYU
3.00

MOES1103-Brazilian Jiujitsu Basic and Self defense
(6673)
Tu 10:30 - 11:50
Multifunctional Gym Mat
Dongye LYU
3.00

MOES1103-Chinese Archery Advanced
(6688)
Th 17:00 - 18:20
Badminton Court 8
Chao JI
3.00

MOES1103-Chinese Archery Basics
(6687)
Th 15:30 - 16:50
Badminton Court 8
Chao JI
3.00

MOES1103-Chinese Body Building & Fitness (Healthcare class)
(6671)
Tu 18:00 - 19:20
Badminton Court 8
Zhijun ZHOU
3.00

MOES1103-Chinese Dance
(6686)
Mo 16:00 - 17:20
Dance Room 116
Yi XIE
3.00

MOES1103-CrossFit and Weight Training
(6689)
Tu 15:00 - 16:20
Multifunctional Gym Mat
Zhijun ZHOU
3.00

MOES1103-Sanda I
(6626)
We 15:00 - 16:20
Multifunctional Gym Mat
Chenlei MIAO
3.00

MOES1103-Sanda II
(6627)
We 16:30 - 17:50
Multifunctional Gym Mat
Chenlei MIAO
3.00

MOES1103-Soccer I
(6587)
Tu 18:00 - 19:20
Football Field
Junye HUANG
3.00

MOES1103-Soccer II
(6588)
Tu 19:30 - 20:50
Football Field
Junye HUANG
3.00

MOES1103-Soccer III
(6589)
We 18:00 - 19:20
Football Field
Junye HUANG
3.00

MOES1103-Soccer IV
(6590)
We 19:30 - 20:50
Football Field
Junye HUANG
3.00

MOES1103-Squash Advanced
(6650)
We 18:30 - 19:50
Squash Court
Jianfeng HUANG
3.00

MOES1103-Squash Basic I
(6640)
We 15:00 - 16:20
Squash Court
Jianfeng HUANG
3.00

MOES1103-Squash Basic II
(6641)
We 16:30 - 17:50
Squash Court
Jianfeng HUANG
3.00

MOES1103-Swimming I
(6674)
Mo 09:00 - 10:20
Swimming Pool
Xiaoying CHEN
3.00

MOES1103-Swimming II
(6684)
Mo 10:30 - 11:50
Swimming Pool
Xiaoying CHEN
3.00

MOES1103-Swimming II
(6685)
Mo 13:30 - 14:50
Swimming Pool
Xiaoying CHEN
3.00

MOES1103-Table Tennis I
(6611)
Tu 15:00 - 16:20
Table Tennis Court
Zilu QU
3.00

MOES1103-Table Tennis II
(6612)
Tu 16:30 - 17:50
Table Tennis Court
Zilu QU
3.00

MOES1103-Table Tennis III
(6613)
Tu 18:00 - 19:20
Table Tennis Court
Zilu QU
3.00

MOES1103-Table Tennis IV
(6614)
Th 16:30 - 17:50
Table Tennis Court
Zilu QU
3.00

MOES1103-Table Tennis V
(6615)
Th 18:00 - 19:20
Table Tennis Court
Zilu QU
3.00

MOES1103-Tennis I
(6690)
Tu 16:30 - 17:50
Tennis Court
Zhijun ZHOU
3.00

MOES1103-Tennis II
(6691)
We 16:30 - 17:50
Tennis Court
Noah Bo FANG
3.00

MOES1103-Volleyball I
(6585)
Tu 15:00 - 16:20
Volleyball Court
Yongguan DAI
3.00

MOES1103-Volleyball II
(6586)
Tu 16:30 - 17:50
Volleyball Court
Yongguan DAI
3.00

MOES1103-Wushu Historical Fencing I
(6651)
Tu 15:00 - 16:20
Badminton Court 5
Chenlei MIAO
3.00

MOES1103-Wushu Historical Fencing II
(6652)
Tu 16:30 - 17:50
Badminton Court 5
Chenlei MIAO
3.00

MOES1103-Wushu(Taolu) I
(6628)
We 15:00 - 16:20
Badminton Court 5
Ran LI
3.00

MOES1103-Wushu(Taolu) II
(6629)
We 16:30 - 17:50
Badminton Court 5
Ran LI
3.00

MOES1103-Yoga I (Healthcare Class)
(6669)
Tu 16:30 - 17:50
Dance Room 116
Shengnan HE
3.00

MOES1103-Yoga II (Healthcare Class)
(6670)
Tu 18:00 - 19:20
Dance Room 116
Shengnan HE
3.00`;

            console.log('ä½¿ç”¨åµŒå…¥çš„è¯¾ç¨‹æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', klmsCourses.length);
            console.log('æ–‡ä»¶å‰100ä¸ªå­—ç¬¦:', klmsCourses.substring(0, 100));
            
            additionalCourses = parseCourseText(klmsCourses);
            console.log('è§£æå®Œæˆï¼Œé¢å¤–è¯¾ç¨‹æ•°é‡:', additionalCourses.length);
            
            if (additionalCourses.length > 0) {
                console.log('ç¬¬ä¸€ä¸ªè¯¾ç¨‹ç¤ºä¾‹:', additionalCourses[0]);
            } else {
                console.log('è­¦å‘Šï¼šæ²¡æœ‰è§£æåˆ°ä»»ä½•è¯¾ç¨‹ï¼');
            }
            
            console.log('å¼€å§‹æ¸²æŸ“è¯¾ç¨‹é€‰æ‹©å™¨...');
            renderCourseSelector();
        }
        
        // å¤‡ç”¨è¯¾ç¨‹æ•°æ®
        function loadFallbackCourses() {
            console.log('ä½¿ç”¨å¤‡ç”¨è¯¾ç¨‹æ•°æ®...');
            const klmsCourses = `MOES1001-L1
(6465)
Fr 18:00 - 20:50
Rm LHB, C4
TBA
3.00

MOES1003-L1
(6466)
Mo 18:00 - 20:50
Rm LHA, C5
Zhongjing WANG
3.00

MOES1003-L2
(6485)
We 18:00 - 20:50
Rm LHB, C4
Zhongjing WANG
3.00

MOES1003-L3
(6486)
Fr 15:00 - 17:50
Rm 101, W1
Tieying XU
3.00

MOES1003-L4
(6487)
Tu 18:00 - 20:50
Rm LHC-L1, C3
TBA
3.00

MOES1006-L1
(6502)
Th 18:00 - 20:50
Rm LHB, C4
He ZHENG
3.00

MOES1006-L2
(6503)
We 12:00 - 14:50
Rm 102, E4
He ZHENG
3.00

MOES1006-L3
(6504)
Fr 09:00 - 11:50
Rm LHA, C5
Tieying XU
3.00

MOES1103-Badminton I
(6591)
Tu 16:30 - 17:50
Badminton Court
Weidong LI
1.00

MOES1103-Basketball I
(6568)
Mo 15:00 - 16:30
Basketball Court
Chunhui WANG
1.00

MOES1103-Swimming I
(6674)
Mo 09:00 - 10:20
Swimming Pool
Xiaoying CHEN
1.00

MOES1103-Table Tennis I
(6611)
Tu 15:00 - 16:20
Table Tennis Court
Zilu QU
1.00

MOES1103-Tennis I
(6690)
Tu 16:30 - 17:50
Tennis Court
Zhijun ZHOU
1.00

MOES1103-Volleyball I
(6585)
Tu 15:00 - 16:20
Volleyball Court
Yongguan DAI
1.00

MOES1103-Aerobic Dance I
(6638)
We 15:00 - 16:20
Badminton Court 8
Jiajia Hu
1.00

MOES1103-Aerobic Dance II
(6639)
We 16:30 - 17:50
Badminton Court 8
Jiajia Hu
1.00

MOES1103-Badminton II
(6600)
Tu 18:00 - 19:20
Badminton Court
Weidong LI
1.00

MOES1103-Badminton III
(6601)
We 09:00 - 10:20
Badminton Court
Noah Bo FANG
1.00

MOES1103-Badminton IV
(6602)
We 10:30 - 11:50
Badminton Court
Noah Bo FANG
1.00

MOES1103-Basketball II
(6569)
Mo 16:30 - 17:50
Basketball Court
Chunhui WANG
1.00

MOES1103-Basketball III
(6584)
Mo 18:00 - 19:20
Basketball Court
Chunhui WANG
1.00

MOES1103-Soccer I
(6587)
Tu 18:00 - 19:20
Football Field
Junye HUANG
1.00

MOES1103-Soccer II
(6588)
Tu 19:30 - 20:50
Football Field
Junye HUANG
1.00

MOES1103-Soccer III
(6589)
We 18:00 - 19:20
Football Field
Junye HUANG
1.00

MOES1103-Soccer IV
(6590)
We 19:30 - 20:50
Football Field
Junye HUANG
1.00`;
            
            additionalCourses = parseCourseText(klmsCourses);
            console.log('Loaded fallback courses:', additionalCourses.length);
        }
        
        // æ¸²æŸ“è¯¾ç¨‹é€‰æ‹©å™¨
        function renderCourseSelector() {
            const politicsCourses = additionalCourses.filter(course => course.code.startsWith('MOES') && !course.code.includes('1103'));
            const peCourses = additionalCourses.filter(course => course.code.includes('1103'));
            
            console.log('Politics courses:', politicsCourses.length);
            console.log('PE courses:', peCourses.length);
            
            renderCourseOptions('politics-courses', politicsCourses);
            renderCourseOptions('pe-courses', peCourses);
        }
        
        // æ¸²æŸ“è¯¾ç¨‹é€‰é¡¹
        function renderCourseOptions(containerId, courses) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            courses.forEach(course => {
                const courseDiv = document.createElement('div');
                courseDiv.style.cssText = `
                    margin-bottom: 10px; 
                    padding: 10px; 
                    border: 1px solid #e0e0e0; 
                    border-radius: 6px; 
                    cursor: pointer; 
                    transition: all 0.2s;
                    background-color: #fff;
                `;
                
                // åˆ›å»ºå”¯ä¸€çš„è¯¾ç¨‹IDï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦å†²çª
                const uniqueId = `course-${course.code.replace(/[^a-zA-Z0-9]/g, '_')}-${course.day}-${course.startTime.replace(':', '')}`;
                
                courseDiv.innerHTML = `
                    <input type="checkbox" id="${uniqueId}" style="margin-right: 10px;" data-course-code="${course.code}" data-course-day="${course.day}">
                    <label for="${uniqueId}" style="cursor: pointer; font-size: 14px;">
                        <strong>${course.code}</strong><br>
                        <span style="color: #666;">${course.day} ${course.startTime} - ${course.endTime}</span><br>
                        <span style="color: #888; font-size: 12px;">${course.location} | ${course.instructor}</span>
                    </label>
                `;
                
                courseDiv.addEventListener('click', function(e) {
                    if (e.target.type !== 'checkbox') {
                        const checkbox = courseDiv.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                    }
                    updateCourseSelection();
                });
                
                courseDiv.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f0f8ff';
                    this.style.borderColor = '#4a90e2';
                });
                
                courseDiv.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '#fff';
                    this.style.borderColor = '#e0e0e0';
                });
                
                container.appendChild(courseDiv);
            });
        }
        
        // æ›´æ–°è¯¾ç¨‹é€‰æ‹©
        function updateCourseSelection() {
            const checkboxes = document.querySelectorAll('#course-selector input[type="checkbox"]:checked');
            selectedAdditionalCourses = [];
            
            checkboxes.forEach(checkbox => {
                const code = checkbox.getAttribute('data-course-code');
                const day = checkbox.getAttribute('data-course-day');
                
                const course = additionalCourses.find(c => c.code === code && c.day === day);
                if (course) {
                    selectedAdditionalCourses.push({...course, isAdditional: true});
                }
            });
        }
        
        // æ·»åŠ é€‰ä¸­è¯¾ç¨‹æŒ‰é’®äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('add-selected-courses').addEventListener('click', function() {
                updateCourseSelection();
                renderTimetable([...mainCourses, ...selectedAdditionalCourses]);
            });
            
            document.getElementById('clear-added-courses').addEventListener('click', function() {
                selectedAdditionalCourses = [];
                const checkboxes = document.querySelectorAll('#course-selector input[type="checkbox"]');
                checkboxes.forEach(checkbox => checkbox.checked = false);
                renderTimetable(mainCourses);
            });
        });
        
        // é¡µé¢åŠ è½½æ—¶æä¾›ä¸€ä¸ªç¤ºä¾‹
        document.addEventListener('DOMContentLoaded', () => {
             document.getElementById('course-input').value = `AIAA 2290-L02
(6367)
Fr 13:30 - 16:20
 Rm 149, E1 
HU, Xuming
3.00
Open
Delete
UCUG 1077-L04
(6473)
MoWe 09:00 - 10:20
Rm 148, E1
LUO, Moxuan
3.00
Open
Delete
UCUG 1809-L01
(6683)
Tu 12:00 - 14:50
Rm 233, W1
MA, Jinyuan;
ZHU, Junhua
3.00
Open
Delete
UFUG 2103-L06
(6575)
 MoWe 10:30 - 11:50 
Rm 102, W1
YU, Huan
3.00
Open
UFUG 2104-L01
(6603)
MoWe 10:30 - 11:50
Rm 222, W1
ZHANG, Xuning
 3.00`;
        });

    </script>
</body>
</html>